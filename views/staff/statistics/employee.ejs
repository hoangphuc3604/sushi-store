<%- include('../../partials/header') %>

<div class="container-fluid">
    <div class="row">

        <%- include('../../partials/staffNavbar') %>

        <div class="col-md-10 p-4">
            <div class="container mt-4">
                <h1 class="mb-4">Thống Kê Thông Tin Nhân Viên</h1>
                
                <form class="row g-3 align-items-center mb-4" method="POST" action="/staff/search">
                    <div class="col-md-4">
                        <label for="searchName" class="form-label">Tìm kiếm nhân viên</label>
                        <input type="text" class="form-control" id="searchName" name="query" placeholder="Nhập từ khóa">
                    </div>
                    <div class="col-md-4">
                        <label for="searchBranch" class="form-label">Chọn chi nhánh</label>
                        <select class="form-select" id="searchBranch" name="branch">
                            <option value="all">Tất cả</option>
                            <% branches.forEach(branch => { %>
                                <option value="<%= branch.id %>"><%= branch.name %></option>
                            <% }) %>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label d-block">&nbsp;</label>
                        <button type="submit" class="btn btn-primary w-100">Tìm kiếm</button>
                    </div>
                </form>
                
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="">
                            <tr>
                                <th>Mã Nhân Viên</th>
                                <th>Tên Nhân Viên</th>
                                <th>Chi Nhánh</th>
                                <th>Giới tính</th>
                                <th>Số Điện Thoại</th>
                                <th>Địa chỉ</th>
                                <th>Ngày vào làm</th>
                                <th>Lương</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (employees.length > 0) { %>
                                <% employees.forEach(employee => { %>
                                    <tr>
                                        <td><%= employee.id %></td>
                                        <td><%= employee.name %></td>
                                        <td><%= employee.branchName %></td>
                                        <td><%= employee.gender %></td>
                                        <td><%= employee.phone %></td>
                                        <td><%= employee.address %></td>
                                        <td><%= employee.startDate %></td>
                                        <td><%= employee.salary %></td>
                                    </tr>
                                <% }) %>
                            <% } else { %>
                                <tr>
                                    <td colspan="6" class="text-center">Không tìm thấy thông tin nhân viên</td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
            </div>             
        </div>
    </div>
</div>

<%- include('../../partials/footer') %>
